<div class="wrapper">
  <app-navbar [dashboard]="dashboard" [routerLink]="['/admin']"></app-navbar>
  <div class="row">
    <div class="col-2 d-none d-lg-block">
      <app-sidebar [menus]="menus"></app-sidebar>
    </div>
    <div class="custom-card col-6">
      <div class="app-employee-form">
        <form
          class="form-body needs-validation"
          #form="ngForm"
          (ngSubmit)="employeeCreateOrUpdate(form.value, typeOfForm, form)"
          novalidate
        >
          <div
            class="h4 mb-4
               d-flex justify-content-between font-weight-bold"
            style="font-size: 1.1rem;"
          >
            {{
              typeOfForm === "get"
                ? "Employee Data for " + employee?.empId
                : typeOfForm === "create"
                ? "Create Employee"
                : "Update Employee"
            }}
            <span *ngIf="typeOfForm !== 'get'"><h6>*&nbsp;Required fields</h6></span>
          </div>

          <div class="h4 mb-4">
            <label [ngClass]="{'mandatory': (typeOfForm !== 'get')}" class="control-label" for="empId">Employee ID: </label>

            <input
              type="text"
              id="empId"
              class="form-control"
              placeholder="Employee Id"
              [(ngModel)]="employee && employee.empId"
              name="empId"
              required
              maxlength="6"
              minlength="1"
              [readonly]="!(typeOfForm === 'create')"
              #empId="ngModel"
            />
            <div class="invalid-feedback"><i class="fa fa-error"></i></div>
            <p *ngIf="empId.invalid && empId.touched">
              *Employee Id is required
            </p>
          </div>

          <div
            class="form-group h4 mb-4"
            [class.has-error]="email.invalid && email.touched"
          >
            <label [ngClass]="{'mandatory': (typeOfForm !== 'get')}" class="control-label" for="email">Email Id: </label>

            <input
              type="text"
              id="email"
              class="form-control"
              placeholder="Email"
              [(ngModel)]="employee && employee.email"
              name="email"
              required
              minlength="2"
              maxlength="30"
              [disabled]="typeOfForm === 'get'"
              #email="ngModel"
            />

            <p *ngIf="email.invalid && email.touched">*Email is required</p>
          </div>

          <div
            class="h4 mb-4 form-group"
            [class.has-error]="empName.invalid && empName.touched"
          >
            <label [ngClass]="{'mandatory': (typeOfForm !== 'get')}" class="control-label" for="name">Name: </label>

            <input
              type="text"
              id="emp_name"
              class="form-control"
              placeholder="Employee Name"
              [(ngModel)]="employee && employee.name"
              name="name"
              required
              maxlength="30"
              minlength="2"
              [disabled]="typeOfForm === 'get'"
              #empName="ngModel"
            />
            <p *ngIf="empName.touched && empName.invalid">Required</p>
          </div>

          <div
            class="form-group h4 mb-4"
            [class.has-error]="addressInput.invalid && addressInput.touched"
          >
            <label [ngClass]="{'mandatory': (typeOfForm !== 'get')}" class="control-label" for="address">Address: </label>

            <input
              type="text"
              id="address"
              class="form-control"
              placeholder="Address"
              [(ngModel)]="employee && employee.address"
              name="address"
              required
              minlength="4"
              maxlength="40"
              [disabled]="typeOfForm === 'get'"
              #addressInput="ngModel"
            />
            <p *ngIf="addressInput.invalid && addressInput.touched">
              Address is required
            </p>
          </div>

          <div
            class=" form-group h4 mb-4"
            [class.has-error]="phoneInput.invalid && phoneInput.touched"
          >
            <label [ngClass]="{'mandatory': (typeOfForm !== 'get')}" for="phone" class="control-label">Phone: </label>

            <input
              type="text"
              id="phone"
              class="form-control"
              placeholder="Phone"
              [(ngModel)]="employee && employee.phone"
              name="phone"
              required
              minlength="8"
              maxlength="11"
              [disabled]="typeOfForm === 'get'"
              #phoneInput="ngModel"
            />
            <p *ngIf="phoneInput.invalid && phoneInput.touched">
              phoneNo is required
            </p>
          </div>
          <div
            class="h5 mb-4 form-group"
            [class.has-error]="joiningInput.touched"
          >
            <label [ngClass]="{'mandatory': (typeOfForm !== 'get')}" for="start" class="control-label">Joining:</label>
            <input
              type="date"
              id="joining"
              class="form-control"
              placeholder="Joining"
              [ngModel]="employee && (employee.joining | date:'yyyy-MM-dd')"
              name="joining"
              required
              [readonly]="typeOfForm === 'get'"
              #joiningInput="ngModel"
            />
            <p *ngIf="joiningInput.touched && joiningInput.invalid">
              Joining Date is required
            </p>
          </div>
          <div
            class="form-group h4 mb-4"
            [class.has-error]="designationInput.touched"
          >
            <mat-label for="designation" class="control-label"
              >Designation:
            </mat-label>

            <mat-select
              placeholder="Choose a Designation"
              class="browser-default custom-select"
              name="designation"
              required
              [(ngModel)]="employee && employee.designation"
              [disabled]="typeOfForm === 'get'"
              #designationInput="ngModel"
            >
              <mat-option value="associate" selected>Associate</mat-option>
              <mat-option value="consultant-2">Consultant 2</mat-option>
              <mat-option value="consultant-1">Consultant 1</mat-option>
              <mat-option value="intern">Intern</mat-option>
            </mat-select>
            <p *ngIf="designationInput.touched && designationInput.invalid">
              Designation is required
            </p>
          </div>

          <div class="h4 mb-4 form-group" [class.has-error]="roleInput.touched">
            <mat-label for="role" class="control-label">Role: </mat-label>

            <mat-select
              placeholder="Choose a Role"
              required
              class="browser-default custom-select mb-4"
              name="role"
              [(ngModel)]="employee && employee.role"
              [disabled]="typeOfForm === 'get'"
              #roleInput="ngModel"
            >
              <mat-option value="employee">Employee</mat-option>
              <mat-option value="project-manager">Project Manager</mat-option>
              <mat-option value="c-level">C Level Manager</mat-option>
            </mat-select>
            <p *ngIf="roleInput.touched && roleInput.invalid">
              Role is required
            </p>
          </div>
          <div class="button-parent" *ngIf="formType !== 'get'">
            <button *ngIf="typeOfForm !== 'get'"
              mdbBtn
              class=" btn logout text-center m-4"
              mdbWavesEffect
              type="submit"
            >
              {{ typeOfForm === "create" ? "Add Employee" : "Update Employee" }}
            </button>

            <button
              type="button"
              mdbBtn
              class=" btn logout text-center m-4"
              mdbWavesEffect
              [routerLink]="['/admin']"
            >
              Cancel
            </button>
           
          </div>
        </form>
        {{ form.value | json }}
      </div>
    </div>
  </div>
</div>
