<div class="wrapper">
  <mat-toolbar color="primary" class="navbar" style="z-index: 100000000;">
    <div>
      Company Dashboard
    </div>
    <div>
      <span routerLink="/myProfile">My Profile</span>
      
    <button
      type="button"
      class="btn btn-outline-warning logout text-center text-yellow m-2 btnsstyle"
      (click)="logout()"
      >
      <i class="fa fa-power-off"></i>
    </button>
    </div>
  </mat-toolbar>

 
   <div class="app-main no-scrollbar-wrap">
    <app-sidebar [menus]="menus"></app-sidebar>
  <div class="no-scrollbar">
   <div class="container-fluid ">
    <div class="row">
      <div class=" col-lg-6 col-md-6 col-xs-0 col-sm-0 ">
      <div class="app-employee-form">
         <form
         (ngSubmit)="projectCreateOrUpdate(form.value, 'create')"
         #form="ngForm"
           class="text-left border border-light p-5 col-xs-8 col-sm-8 col-lg-8 col-md-8 form-body">
           <div class="h5 mb-4  d-flex justify-content-between font-weight-bold"
             style="font-size: 2rem;">
             {{
               formType === "get"
                 ? "Project Data"
                 : formType === "create"
                 ? "Create New Project"
                 : "Update Project"
             }}
             
           </div>
       
           <div class="h5 mb-4 form-group was-validated"[class.has-error]="projectId.touched">
             <label class="control-label" for="projectId">Project ID:</label>
       
             <input
               type="text"
               id="projectId"
               class="form-control"
               placeholder="Project Id"
               [ngModel]="project && project.projectId"
               name="projectId"
               [disabled]="formType === 'get'"
               required
               minlength="1"
               maxlength="20"
               #projectId
             />
             <p  *ngIf="projectId.touched">project Id is required</p>
           </div>
       
           <div class="h5 mb-4 form-group was-validated"[class.has-error]="projectNameInput.touched">
             <label for="projectName">Project Name:</label>
       
             <input
               type="text"
               id="projectName"
               class="form-control"
               placeholder="Project Name"
               [(ngModel)]="project&& project.projectName"
               name="projectName"
               required
               [disabled]="formType === 'get'"
               #projectNameInput
             />
             <p  *ngIf="projectNameInput.touched">projectName is required</p>
           </div>
       
           <div class="h5 mb-4 was-validated form-group"[class.has-error]="clientNameInput.touched">
             <label class="control-label" for="client_name">Client Name:</label>
       
             <input
               type="text"
               id="client_name"
               class="form-control"
               placeholder="Client Name"
               [(ngModel)]="project && project.clientName"
               name="client_name"
               required
               minlength="2"
               maxlength="20"
               [disabled]="formType === 'get'"
               #clientNameInput
             />
             <p  *ngIf="clientNameInput.touched">clientName is required</p>
           </div>

            <div class="h5 mb-4 form-group was-validated"[class.has-error]="projectManagerInput">
            <label for="managers">Project Manager:</label>
      
             <mat-select
              class="browser-default custom-select"
              name="managers"
              [ngModel]="projManager"
              [disabled]="formType ==='get'"
              (ngModelChange)="addProjectManager($event)"
              #projectManagerInput
              required
              minlength="2"
              maxlength="20"
              multiple>
              <mat-option *ngFor="let emp of empList" [value]="emp._id">{{emp.name}}</mat-option>
           </mat-select> 
             <div  *ngIf="projectManagerInput.touched">projectManager is required</div>
          </div>
           
          
           <div class="h5 mb-4 form-group was-validated"[class.has-error]="StartDateInput">
             <label for="start">Start Date:</label>
       
             <input
               type="date"
               id="start"
               class="form-control"
               placeholder="Start Date"
               [(ngModel)]="project && project.startDate"
               name="startDate"
               required
               [disabled]="formType === 'get'"
               #startDateInput
             />
             <p  *ngIf="startDateInput.touched">startDate is required</p>
           </div>
           
           <div class="h5 mb-4 form-group was-validated"[class.has-error]="endDateInput.touched">
             <label class="control-label"for="end">End Date:</label>
       
             <input
               type="date"
               id="end"
               class="form-control"
               placeholder="End Date"
               [(ngModel)]="project && project.endDate"
               required
               name="endDate"
               [disabled]="formType === 'get'"
               #endDateInput
             />
             <p  *ngIf="endDateInput.touched">EndDate is required</p>
           </div>
       
           <div class="h5 mb-4 form-group was-validated"[class.has-error]="statusInput.touched">
             <label class="control-label"for="status">Status:</label>
       
             <select
               class="browser-default custom-select"
               name="status"
               [(ngModel)]="project && project.status[0]"
               required
               [disabled]="formType === 'get'"
               #statusInput
             >
               <option value="" disabled>Choose option</option>
               <option value="In Progress" selected>In Progress</option>
               <option value="Completed">Completed</option>
               <option value="Closed">Closed</option>
             </select>
             <p  *ngIf="statusInput.touched">status is required</p>
           </div>

           <div class="h5 mb-4 form-group was-validated"[class.has-error]="membersInput">
            <label class="control-label" for="members">Project Members:</label>
           <mat-select
           class="browser-default custom-select"
           name="members"
           [ngModel]="projMembers"
           [disabled]="formType ==='get'"
           (ngModelChange)="addProjectMember($event)"
           #membersInput
           required
           minlength="2"
           maxlength="20"
           multiple>
           <mat-option *ngFor="let emp of empList" [value]="emp._id">{{emp.name}}</mat-option>
        </mat-select> 
          <div  *ngIf="membersInput.touched">project Members are required</div>
       </div>
       
              <!-- <div class="h5 mb-4">
             <label class="control-label"for="members">Project Members:</label>
              <mat-select
               class="browser-default custom-select"
               name="members"
               [(ngModel)]="project && project.empObjectIdArray"
               [disabled]="formType === 'get'"
               [(ngModel)]="project && project.members[0]"
               #membersInput
               required
               matInput placeholder="members"
               [formControl]="emp" multiple>
               <mat-option *ngFor="let emp of empList" [value]="emp">{{emp.name}}</mat-option>
            </mat-select> 
             
           </div> -->
    
              <!-- <div class="h5 mb-4 form-group was-validated"[class.has-error]="membersInput.touched">
            <label for="manager">Project Members:</label>
      
            <input
              type="text"
              id="members"
              class="form-control"
              placeholder="Project Manager"
              [(ngModel)]="project && project.empObjectIdArray"
              name="members"
              [disabled]="formType === 'get'"
              #membersInput
            />
                <div  *ngIf="membersInput.touched">members are required</div>
          </div>
       -->
           <div class="button-parent" *ngIf="formType !== 'get'">
               <button
                 mdbBtn
                 class=" btn btn-outline-warning  text-center text-yellow m-4 btnsstyle"
                 mdbWavesEffect
                 
                
                 type="submit"
               >
           {{ (formType === "create") ? "Add New Project" : "Update Project" }}
           </button>
           <button
             type="button"
             mdbBtn
             class="btn btn-outline-warning  text-center text-yellow m-2 btnsstyle"
             mdbWavesEffect
             
             [routerLink]="['/projects']"
           >
              Cancel
           </button>
           <div class="message">{{ this.message }}</div>
           </div> 
       
         </form>
       </div>
     </div>
     </div>
     </div>
       </div>
  </div>




  